/**
 * БИБЛИОТЕКА ДЕЙСТВИЙ И РЕКОМЕНДАЦИЙ
 * "Лестница союза"
 *
 * Для каждого уровня - 3 критичных действия с конкретными шагами
 * Адаптированы для разных сценариев (одиночка, в отношениях, пара)
 */

import { ActionStep, ActionPlan, UnionLevel } from './types';

// ============================================================================
// УРОВЕНЬ 1 - ТРАВМА И РАЗРУШЕНИЕ
// ============================================================================

const LEVEL_1_ACTIONS: ActionPlan = {
  level: 1,
  mainChallenge:
    'Немедленная безопасность - физическая, эмоциональная и экономическая. Без безопасности невозможен рост.',
  topActions: [
    {
      id: 'l1-action-1',
      title: 'Создать план физической безопасности',
      description:
        'Разработать конкретный план на случай кризиса: номера телефонов, безопасное место, документы, деньги. Обсудить с надежным человеком.',
      duration: 60,
      difficulty: 'moderate',
      example:
        'Запишите контакты кризисного центра, близких людей, адреса безопасных мест. Спрячьте копию документов в безопасном месте.',
      expected_outcome:
        'Чувство большей контроля и готовности к критическим ситуациям',
    },
    {
      id: 'l1-action-2',
      title: 'Начать работу с психологом специалистом в травме',
      description:
        'Профессиональная помощь критична на этом уровне. PTSD, комплекс жертвы и диссоциация требуют специализированного подхода.',
      duration: 90,
      difficulty: 'challenging',
      example:
        'Найдите психолога или психотерапевта с опытом в травме (EMDR, соматическая терапия). Первая сессия - рассказать историю.',
      expected_outcome:
        'Начало процесса исцеления, появление надежды и понимания своего состояния',
    },
    {
      id: 'l1-action-3',
      title: 'Установить один твёрдый физический и эмоциональный границу',
      description:
        'Начните с одной границы, которую будете соблюдать жёстко. Это может быть "я не сплю с ним/ей до её извинений" или "я ухожу если начинаются оскорбления".',
      duration: 30,
      difficulty: 'challenging',
      example:
        'Решите: "Я ухожу в другую комнату, если начинаются крики" И ДЕЛАЙТЕ ЭТО КАЖДЫЙ РАЗ.',
      expected_outcome:
        'Восстановление чувства достоинства и понимание что ваша безопасность зависит от вас',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 2 - КАРМАТИЧЕСКАЯ ПЕТЛЯ
// ============================================================================

const LEVEL_2_ACTIONS: ActionPlan = {
  level: 2,
  mainChallenge:
    'Выход из бессознательных паттернов повторения. Вы повторяете историю семьи, но не видите это.',
  topActions: [
    {
      id: 'l2-action-1',
      title: 'Выписать паттерн из семьи и текущих отношений',
      description:
        'Сопоставить поведение родителей с текущим поведением. Часто люди выбирают партнера похожего на проблемного родителя.',
      duration: 45,
      difficulty: 'moderate',
      example:
        'Напишите: "Мой отец был..., и мой партнер тоже...". "Мама реагировала на критику так..., и я тоже...".',
      expected_outcome:
        'Осознание паттерна - первый шаг к выходу из него',
    },
    {
      id: 'l2-action-2',
      title: 'Сделать один новый выбор вопреки паттерну',
      description:
        'Когда ситуация похожа на семейный паттерн, сделайте противоположное от того что "всегда было".',
      duration: 20,
      difficulty: 'moderate',
      example:
        'Если в вашей семье молчали о чувствах, скажите партнеру о своих чувствах. Если дерались, скажите "мне нужна пауза".',
      expected_outcome:
        'Опыт что другой выбор возможен, начало выхода из кармического круга',
    },
    {
      id: 'l2-action-3',
      title: 'Развить осознанность о том что вы выбираете',
      description:
        'Часто люди на уровне 2 не видят что они выбирают. Медитация и дневник помогут развить осознанность.',
      duration: 15,
      difficulty: 'easy',
      example:
        'Каждый день 5 минут медитации. По вечерам: "Сегодня я выбрал... потому что я верил что...".',
      expected_outcome:
        'Постепенное пробуждение - понимание что ваши выборы не случайны',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 3 - ВЫЖИВАНИЕ
// ============================================================================

const LEVEL_3_ACTIONS: ActionPlan = {
  level: 3,
  mainChallenge:
    'Преодолеть страх одиночества и развить минимальную самостоятельность. Отношения - это не вопрос выживания.',
  topActions: [
    {
      id: 'l3-action-1',
      title: 'Развить личную экономическую независимость',
      description:
        'Главный страх уровня 3 - финансовая зависимость. Разработайте план получения собственного дохода, даже если небольшого.',
      duration: 120,
      difficulty: 'challenging',
      example:
        'Найдите работу, фриланс, свой проект. Цель: личный доход который вы контролируете полностью.',
      expected_outcome:
        'Чувство безопасности и реальная возможность уйти если нужно',
    },
    {
      id: 'l3-action-2',
      title: 'Провести время в одиночестве и не паниковать',
      description:
        'Нужно научиться быть в одиночестве без паники. Начните маленько - 30 минут одного без партнера.',
      duration: 30,
      difficulty: 'moderate',
      example:
        `Неделя 1-2: час один раз в неделю. Неделя 3-4: два часа два раза. Месяц 2: полный день один.
        Наблюдайте: что происходит в голове? Какие мысли страшные?`,
      expected_outcome:
        'Осознание что в одиночестве ничего страшного не происходит, появление личного пространства',
    },
    {
      id: 'l3-action-3',
      title: 'Развить минимум социальных связей кроме партнера',
      description:
        'На уровне 3 партнер - единственный источник социального контакта. Это создает огромную зависимость.',
      duration: 60,
      difficulty: 'moderate',
      example:
        'Найдите одного человека с кем мог бы общаться (друг, родитель, группа). Встречайтесь хотя бы раз в неделю.',
      expected_outcome:
        'Диверсификация социальной жизни, снижение зависимости от партнера',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 4 - РЕСУРСЫ И СТАБИЛЬНОСТЬ
// ============================================================================

const LEVEL_4_ACTIONS: ActionPlan = {
  level: 4,
  mainChallenge:
    'Перейти от практической функции к эмоциональной связи. Отношения не только о быте и ролях.',
  topActions: [
    {
      id: 'l4-action-1',
      title: 'Инициировать еженедельный "эмоциональный чекин"',
      description:
        'На уровне 4 люди говорят о деньгах, детях, доме - но не о чувствах. Введите еженедельный разговор о чувствах.',
      duration: 20,
      difficulty: 'moderate',
      example:
        'Каждый понедельник 20 минут. Вопросы: "Как ты себя чувствовал на этой неделе?", "Что было сложного?", "Что тебе нужно от меня?"',
      expected_outcome:
        'Начало развития эмоциональной близости, осознание что партнер - это не просто функция',
    },
    {
      id: 'l4-action-2',
      title: 'Провести "дату" вне дома без обсуждения быта',
      description:
        'Отношения на уровне 4 строятся вокруг дома и детей. Создайте пространство где вы двое - просто человек и человек.',
      duration: 120,
      difficulty: 'easy',
      example:
        'Каждые две недели выходите вдвоем. Запретите себе говорить о: доме, детях, деньгах, планах. Только о чувствах, мечтах, интересах.',
      expected_outcome:
        'Восстановление личной связи под ролями, обнаружение что партнер интересен как личность',
    },
    {
      id: 'l4-action-3',
      title: 'Практиковать слушание без решения проблемы',
      description:
        'На уровне 4 первый рефлекс - решить проблему. Нужно научиться просто слушать и понимать.',
      duration: 15,
      difficulty: 'moderate',
      example:
        'Когда партнер говорит о проблеме: не давайте советы. Спросите: "Как ты себя чувствуешь?", "Чего ты хочешь?" Слушайте.',
      expected_outcome:
        'Развитие эмпатии, партнер почувствует что его слышат как человека, а не как задачу',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 5 - ЭМОЦИИ И СТРАСТЬ
// ============================================================================

const LEVEL_5_ACTIONS: ActionPlan = {
  level: 5,
  mainChallenge:
    'Управлять эмоциональной интенсивностью и развить регуляцию. Страсть без контроля = циклы конфликт-примирение.',
  topActions: [
    {
      id: 'l5-action-1',
      title: 'Создать "стоп-технику" для горячих конфликтов',
      description:
        'На уровне 5 люди импульсивны в конфликте. Нужна техника чтобы сделать паузу прежде чем говорить больно.',
      duration: 30,
      difficulty: 'moderate',
      example:
        'Договоритесь: когда один говорит "мне нужна пауза", второй уходит на 30 минут. За это время: прогулка, вода, дыхание. Потом вернитесь спокойнее.',
      expected_outcome:
        'Снижение количества деструктивных вещей сказанных в горячке, сохранение больше доверия',
    },
    {
      id: 'l5-action-2',
      title: 'Развить личную практику регуляции эмоций',
      description:
        'Нужна личная практика которая помогает успокоиться: йога, бег, дыхание, арт-терапия.',
      duration: 30,
      difficulty: 'easy',
      example:
        'Выберите одну практику. Делайте её когда эмоции зашкаливают. Регулярность: каждый день 20 минут.',
      expected_outcome:
        'Увеличение окна толерантности, меньше реактивности в отношениях',
    },
    {
      id: 'l5-action-3',
      title: 'Отделить ревность от любви',
      description:
        'На уровне 5 люди верят что ревность = доказательство любви. Нужно переоценить это убеждение.',
      duration: 45,
      difficulty: 'moderate',
      example:
        'Напишите: мои ревностные моменты это... Они связаны с моим страхом... Если нет ревности, это означает что я... (не люблю? наоборот, люблю здраво?)',
      expected_outcome:
        'Начало осознания что здоровая любовь не требует ревности, может быть доверие',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 6 - СТАТУС И РОЛЬ
// ============================================================================

const LEVEL_6_ACTIONS: ActionPlan = {
  level: 6,
  mainChallenge:
    'Перейти от имиджа к аутентичности. То что думают люди менее важно чем то что чувствуется внутри.',
  topActions: [
    {
      id: 'l6-action-1',
      title: 'Делать одно "не правильное" действие в неделю на глазах общества',
      description:
        'На уровне 6 огромное внимание к имиджу. Нужно практиковать уязвимость на глазах общества.',
      duration: 20,
      difficulty: 'moderate',
      example:
        'Признайтесь что-то нелестное о себе на встрече с друзьями. Или наденьте что-то странное. Заметьте: мир не рушится, люди не судят как сильно вы ожидали.',
      expected_outcome:
        'Снижение социальной тревожности, осознание что аутентичность привлекает людей больше чем имидж',
    },
    {
      id: 'l6-action-2',
      title: 'Выразить партнеру настоящие чувства вопреки имиджу',
      description:
        'На уровне 6 люди скрывают сложные чувства. Нужно научиться говорить что правда.',
      duration: 20,
      difficulty: 'moderate',
      example:
        'Скажите партнеру что-то что вам стыдно: "Я боюсь что я не достаточно хороша", или "Я завидую твоему успеху".',
      expected_outcome:
        'Партнер видит вас по-настоящему, связь становится глубже, парадоксально это укрепляет имидж',
    },
    {
      id: 'l6-action-3',
      title: 'Отказать одному желанию общества (публично)',
      description:
        'На уровне 6 люди делают то что общество ожидает. Нужно одно желание которое вы выполняли для имиджа просто отменить.',
      duration: 30,
      difficulty: 'challenging',
      example:
        'Если ходили на вечеринки чтобы быть социальной, перестаньте. Если носили дорогую одежду чтобы выглядеть успешно - переходите на комфортное.',
      expected_outcome:
        'Освобождение энергии, удивление что без имиджа жизнь легче, началу развития собственной идентичности',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 7 - ПСИХОЛОГИЧЕСКАЯ СВЯЗЬ (ПЕРВЫЙ ЗРЕЛЫЙ УРОВЕНЬ)
// ============================================================================

const LEVEL_7_ACTIONS: ActionPlan = {
  level: 7,
  mainChallenge:
    'Углубить психологическую безопасность и развить навыки сочувствия. На этом уровне вы способны к настоящей близости.',
  topActions: [
    {
      id: 'l7-action-1',
      title: 'Развить практику "глубокого слушания"',
      description:
        'На уровне 7 нужно перейти от слушания к пониманию внутреннего мира партнера. Это требует ежедневной практики.',
      duration: 30,
      difficulty: 'moderate',
      example:
        'Раз в день: 10 минут где партнер говорит а вы слушаете без перерывов. Повторяйте его слова: "Я слышал что ты говоришь..." Спрашивайте о чувствах.',
      expected_outcome:
        'Глубокое понимание внутреннего мира партнера, появление чувства что вас действительно видят',
    },
    {
      id: 'l7-action-2',
      title: 'Практиковать конфликт как инструмент роста',
      description:
        'На уровне 7 конфликт - это не угроза а возможность лучше понять друг друга. Нужно переоценить конфликт.',
      duration: 30,
      difficulty: 'moderate',
      example:
        'После конфликта: "Что этот конфликт научил нас? Где мы не слушали? Как это поможет нам быть ближе?"',
      expected_outcome:
        'Превращение конфликтов в моменты глубокого понимания, укрепление связи',
    },
    {
      id: 'l7-action-3',
      title: 'Поделиться своей внутренней миром полностью',
      description:
        'На уровне 7 вы готовы к полной уязвимости. Это значит поделиться всем что вы скрывали.',
      duration: 60,
      difficulty: 'moderate',
      example:
        'Сядьте вдвоем. Поделитесь страхом который вы никогда не озвучивали. Рассказите о мечте которая вас пугает.',
      expected_outcome:
        'Глубокое чувство принятия, осознание что партнер вас принимает полностью',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 8 - ЛЮБОВЬ И ПРИНЯТИЕ
// ============================================================================

const LEVEL_8_ACTIONS: ActionPlan = {
  level: 8,
  mainChallenge:
    'Развить безусловное принятие и научиться давать не ожидая взамен. Любовь становится служением.',
  topActions: [
    {
      id: 'l8-action-1',
      title: 'Практиковать "служение" - делать что-то для партнера без вознаграждения',
      description:
        'На уровне 8 любовь становится отдачей. Нужно делать вещи которые приносят радость партнеру без ожидания благодарности.',
      duration: 30,
      difficulty: 'easy',
      example:
        'Каждую неделю сделайте одно дело которое партнеру очень нравится но ему трудно. И не ожидайте благодарности.',
      expected_outcome:
        'Переживание радости от служения, осознание что это приносит больше радости чем взаимность',
    },
    {
      id: 'l8-action-2',
      title: 'Поддержать мечту партнера которая вас пугает',
      description:
        'На уровне 8 принятие означает поддерживать то что партнер хочет делать даже если вас это пугает.',
      duration: 45,
      difficulty: 'moderate',
      example:
        'Если партнер хочет сменить профессию что вас пугает - поддержите его. Помогите планировать переход.',
      expected_outcome:
        'Партнер чувствует настоящую поддержку, вы развиваете доверие к его выборам',
    },
    {
      id: 'l8-action-3',
      title: 'Молитва, благодарность, практика преданности',
      description:
        'На уровне 8 появляется духовный компонент. Если вы верующий - молитесь за партнера. Если нет - медитируйте на благодарность.',
      duration: 15,
      difficulty: 'easy',
      example:
        'Каждый день: 5 минут благодарности за то что у вас есть этот человек. Или молитва за его благополучие.',
      expected_outcome:
        'Углубление чувства священности отношений, появление смирения',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 9 - СВОБОДА И ЗРЕЛОСТЬ
// ============================================================================

const LEVEL_9_ACTIONS: ActionPlan = {
  level: 9,
  mainChallenge:
    'Балансировать полную автономию с глубокой связью. На этом уровне вы выбираете друг друга каждый день.',
  topActions: [
    {
      id: 'l9-action-1',
      title: 'Развивать собственные проекты и интересы независимо от партнера',
      description:
        'На уровне 9 каждый остается полностью отдельной личностью. Это означает сохранение и развитие собственных целей.',
      duration: 120,
      difficulty: 'moderate',
      example:
        'Создайте личный проект который вас вдохновляет, независимо от мнения партнера. Посвящайте ему время еженедельно.',
      expected_outcome:
        'Сохранение собственной идентичности, партнер вас уважает как отдельного человека',
    },
    {
      id: 'l9-action-2',
      title: 'Практиковать "выбор" - каждый день выбирайте партнера заново',
      description:
        'На уровне 9 отношения основаны на ежедневном выборе, не на обязательстве. Это переоценка взаимной ответственности.',
      duration: 10,
      difficulty: 'easy',
      example:
        'Каждое утро: "Я выбираю быть с этим человеком сегодня потому что..." Вечером спросите партнера то же.',
      expected_outcome:
        'Отношения становятся легче, потому что это выбор а не обязательство, больше благодарности',
    },
    {
      id: 'l9-action-3',
      title: 'Развивать взаимное вдохновение',
      description:
        'На уровне 9 оба помогают друг другу стать лучшей версией себя. Это активный процесс.',
      duration: 30,
      difficulty: 'moderate',
      example:
        'Раз в месяц: обсудите что вы видите как потенциал в друг друге. Какие дверь открыт партнер для вас? Как вы помогаете друг другу?',
      expected_outcome:
        'Отношения становятся источником вдохновения и роста для обоих',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 10 - СИНЕРГИЯ И РОСТ
// ============================================================================

const LEVEL_10_ACTIONS: ActionPlan = {
  level: 10,
  mainChallenge:
    'Создать совместные проекты где 1+1=11. На этом уровне вместе вы можете создавать то что невозможно в одиночку.',
  topActions: [
    {
      id: 'l10-action-1',
      title: 'Создать совместный проект или миссию',
      description:
        'На уровне 10 отношения становятся проводником для создания чего-то значимого. Это может быть любой проект.',
      duration: 240,
      difficulty: 'challenging',
      example:
        'Совместно запустите проект: соберите книгу, создайте программу тренинга, начните благотворительность. Что-то что в одиночку не получилось бы.',
      expected_outcome:
        'Осознание силы синергии, появление чувства что вместе вы создаете историю',
    },
    {
      id: 'l10-action-2',
      title: 'Развивать взаимную амплификацию',
      description:
        'На уровне 10 каждый становится зеркалом и мегафоном для лучшего в другом. Это означает видеть потенциал.',
      duration: 30,
      difficulty: 'moderate',
      example:
        'Еженедельно: "Что я вижу в тебе как потенциал?" Помогайте друг другу развивать эти стороны.',
      expected_outcome:
        'Обоих людей начинают видеть и развивать окружающие люди, начинается волна позитивного влияния',
    },
    {
      id: 'l10-action-3',
      title: 'Расширять влияние за границы отношений',
      description:
        'На уровне 10 ваше влияние выходит за пределы отношений. Вместе вы вдохновляете других.',
      duration: 60,
      difficulty: 'moderate',
      example:
        'Поделитесь вашей историей, вашим путем с другой парой. Помогайте другим увидеть то что вы создали.',
      expected_outcome:
        'Осознание что ваши отношения - это дар и ответственность перед миром',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 11 - СОВМЕСТНОЕ ТВОРЧЕСТВО
// ============================================================================

const LEVEL_11_ACTIONS: ActionPlan = {
  level: 11,
  mainChallenge:
    'Раскрыть творческий потенциал отношений. На этом уровне отношения сами становятся произведением искусства и служением.',
  topActions: [
    {
      id: 'l11-action-1',
      title: 'Создать артефакт творчества вместе',
      description:
        'На уровне 11 нужно создать что-то прекрасное вместе. Это может быть музыка, книга, картина, фильм, движение.',
      duration: 300,
      difficulty: 'challenging',
      example:
        'Напишите книгу о вашем пути. Создайте музыку. Сделайте документальный фильм. Создайте общественное движение.',
      expected_outcome:
        'Осознание что ваша любовь - это творческая сила, что вы можете дать это миру',
    },
    {
      id: 'l11-action-2',
      title: 'Служить через отношения - помогать другим парам',
      description:
        'На уровне 11 отношения становятся служением. Используйте то что вы развили чтобы помогать другим.',
      duration: 120,
      difficulty: 'moderate',
      example:
        'Начните вести пары, делиться опытом, создавайте курсы. Помогайте другим в их пути.',
      expected_outcome:
        'Осознание что служение - это сама суть духовной эволюции, отношения становятся святыми',
    },
    {
      id: 'l11-action-3',
      title: 'Практикировать совместную медитацию и молитву',
      description:
        'На уровне 11 развивается духовный аспект. Вместе входите в состояния глубокой близости с источником.',
      duration: 30,
      difficulty: 'easy',
      example:
        'Каждый день или несколько раз в неделю: сидите вместе в молчании. Молитесь вместе. Медитируйте. Слушайте музыку духовную.',
      expected_outcome:
        'Переживание единства которое выходит за границы личности, осознание священности',
    },
  ],
};

// ============================================================================
// УРОВЕНЬ 12 - ДУХОВНЫЙ СОЮЗ
// ============================================================================

const LEVEL_12_ACTIONS: ActionPlan = {
  level: 12,
  mainChallenge:
    'Жить как инструмент Божественного служения. На этом уровне отношения - это воплощение высшей любви в мире.',
  topActions: [
    {
      id: 'l12-action-1',
      title: 'Исцелять других через вашу любовь',
      description:
        'На уровне 12 ваша любовь становится исцеляющей силой. Люди чувствуют это и исцеляются рядом с вами.',
      duration: 120,
      difficulty: 'moderate',
      example:
        'Держите пространство для других где они могут чувствовать безусловную любовь. Молитесь за людей. Служите через проявление любви.',
      expected_outcome:
        'Осознание что ваша любовь - это целебное служение, люди рядом с вами начинают преобразовываться',
    },
    {
      id: 'l12-action-2',
      title: 'Помогать преобразовывать другие пары и мир',
      description:
        'На уровне 12 ваша задача - помогать другим найти путь к духовному союзу. Это самое важное служение.',
      duration: 240,
      difficulty: 'challenging',
      example:
        'Создавайте школы, общины, движения где люди учатся истинной любви. Помогайте парам подняться по лестнице.',
      expected_outcome:
        'Осознание вашего места в истории, участие в трансформации мира через любовь',
    },
    {
      id: 'l12-action-3',
      title: 'Жить как молитва',
      description:
        'На уровне 12 жизнь сама становится молитвой. Каждое действие - служение, каждый момент - священен.',
      duration: 10,
      difficulty: 'easy',
      example:
        'Каждый момент: "Пусть эта любовь служит высшему добру". Живите с сознанием что вы инструмент Божественной воли.',
      expected_outcome:
        'Полное растворение в служении, переживание что вы являетесь частью чего-то бесконечно большего',
    },
  ],
};

// ============================================================================
// ПУБЛИЧНЫЙ API
// ============================================================================

const LEVEL_ACTIONS_MAP: Map<UnionLevel, ActionPlan> = new Map([
  [1, LEVEL_1_ACTIONS],
  [2, LEVEL_2_ACTIONS],
  [3, LEVEL_3_ACTIONS],
  [4, LEVEL_4_ACTIONS],
  [5, LEVEL_5_ACTIONS],
  [6, LEVEL_6_ACTIONS],
  [7, LEVEL_7_ACTIONS],
  [8, LEVEL_8_ACTIONS],
  [9, LEVEL_9_ACTIONS],
  [10, LEVEL_10_ACTIONS],
  [11, LEVEL_11_ACTIONS],
  [12, LEVEL_12_ACTIONS],
]);

/**
 * Получить план действий для уровня
 */
export function getActionPlan(level: UnionLevel): ActionPlan {
  const plan = LEVEL_ACTIONS_MAP.get(level);
  if (!plan) {
    throw new Error(`Action plan not found for level ${level}`);
  }
  return plan;
}

/**
 * Получить все планы действий
 */
export function getAllActionPlans(): ActionPlan[] {
  const plans: ActionPlan[] = [];
  for (let level: UnionLevel = 1; level <= 12; level++) {
    plans.push(getActionPlan(level));
  }
  return plans;
}

/**
 * Получить конкретное действие по ID
 */
export function getActionById(level: UnionLevel, actionId: string): ActionStep | undefined {
  const plan = getActionPlan(level);
  return plan.topActions.find((a) => a.id === actionId);
}
