import { TraumaPattern } from '../types/analysis-types';
import { 
  countIndicatorsOfType, 
  traumaKeywords,
  hasAnyIndicator
} from './analysis-helpers';

/**
 * –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã —Ç—Ä–∞–≤–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —É—Ä–æ–≤–Ω—è –ª–∏—á–Ω–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏
 * @param indicators - —Å–ø–∏—Å–æ–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
 * @param personalMaturity - —É—Ä–æ–≤–µ–Ω—å –ª–∏—á–Ω–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏
 * @returns –æ–±—ä–µ–∫—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ç—Ä–∞–≤–º—ã
 */
export const analyzeTraumaPattern = (
  indicators: string[], 
  personalMaturity: number
): TraumaPattern => {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  const hasChildhoodActivation = hasAnyIndicator(indicators, ['childhood_trauma_activation', 'terror_familiar']);
  const hasKarmicLoop = hasAnyIndicator(indicators, ['karmic_loop', 'pattern_repetition']);
  const hasSurvivalFear = hasAnyIndicator(indicators, ['survival_fear', 'abandonment_terror']);
  
  // –î–µ—Ç–µ–∫—Ü–∏—è –≤—ã—Å–æ–∫–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ç—Ä–∞–≤–º—ã
  const hasCompensatedTrauma = personalMaturity >= 7 && (hasChildhoodActivation || hasKarmicLoop);
  
  // –ü–æ–¥—Å—á–µ—Ç "—Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö" –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  const traumaIndicatorsCount = countIndicatorsOfType(indicators, traumaKeywords);

  // –í—ã—Å–æ–∫–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä–∞–≤–º–∞
  if (hasCompensatedTrauma && traumaIndicatorsCount >= 2) {
    return {
      type: 'compensated_high_functioning',
      severity: 'significant',
      title: 'üé≠ –í—ã—Å–æ–∫–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä–∞–≤–º–∞',
      description: '–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ª–∏—á–Ω–æ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –º–∞—Å–∫–∏—Ä—É–µ—Ç –Ω–µ–∏—Å—Ü–µ–ª–µ–Ω–Ω—É—é –¥–µ—Ç—Å–∫—É—é —Ç—Ä–∞–≤–º—É. –í –±–ª–∏–∑–æ—Å—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –∞—Ä—Ö–∞–∏—á–Ω—ã–µ –∑–∞—â–∏—Ç—ã.',
      characteristics: [
        '–£—Å–ø–µ—à–Ω–æ—Å—Ç—å –≤ –∂–∏–∑–Ω–∏ –ø—Ä–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—è—Ö –≤ –±–ª–∏–∑–æ—Å—Ç–∏',
        '–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —ç–º–æ—Ü–∏–π –∫–∞–∫ –∑–∞—â–∏—Ç–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º',
        '–ö–æ–Ω—Ç—Ä–æ–ª—å –∏ –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö',
        '–ê–∫—Ç–∏–≤–∞—Ü–∏—è –¥–µ—Ç—Å–∫–∏—Ö —Ä–µ–∞–∫—Ü–∏–π –≤ –º–æ–º–µ–Ω—Ç—ã —É—è–∑–≤–∏–º–æ—Å—Ç–∏'
      ],
      healingPath: [
        '–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ —á—Ç–æ —Ä–∞–∑–≤–∏—Ç–∏–µ –Ω–µ —Ä–∞–≤–Ω–æ –∏—Å—Ü–µ–ª–µ–Ω–∏—é',
        '–†–∞–±–æ—Ç–∞ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Ä–µ–±–µ–Ω–∫–æ–º –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤–∑—Ä–æ—Å–ª–æ—Å—Ç–∏',
        '–°–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–∞–ø–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å "–∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω–æ–π" —Ç—Ä–∞–≤–º–æ–π',
        '–ü—Ä–∞–∫—Ç–∏–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–π —Å—Ä–µ–¥–µ'
      ],
      therapyRecommendations: [
        '–ü–†–ò–û–†–ò–¢–ï–¢: –¢—Ä–∞–≤–º–∞-—Ç–µ—Ä–∞–ø–∏—è (EMDR, —Å–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è)',
        '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥—É—Ö–æ–≤–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π',
        '–î–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞—â–∏—Ç–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤',
        '–†–∞–±–æ—Ç–∞ —Å "–≤–∑—Ä–æ—Å–ª–æ–π —á–∞—Å—Ç—å—é" –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ "–¥–µ—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏"'
      ],
      warningSignals: [
        '–í–Ω–µ–∑–∞–ø–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è –≤ —Å—Ç—Ä–µ—Å—Å–æ–≤—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö',
        '–î–∏—Å—Å–æ—Ü–∏–∞—Ü–∏—è –ø—Ä–∏ –≥–ª—É–±–æ–∫–æ–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–ª–∏–∑–æ—Å—Ç–∏',
        '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ–µ —Ä–∞–∑—Ä—É—à–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π',
        '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —É—Å–ø–µ—Ö –ø—Ä–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º –≤–∞–∫—É—É–º–µ'
      ]
    };
  }

  // –ö–∞—Ä–º–∏—á–µ—Å–∫–∞—è –ø–µ—Ç–ª—è
  if (hasKarmicLoop && traumaIndicatorsCount >= 3) {
    return {
      type: 'karmic_loop',
      severity: 'critical',
      title: '‚ôªÔ∏è –ö–∞—Ä–º–∏—á–µ—Å–∫–∞—è –ø–µ—Ç–ª—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π',
      description: '–í—ã –ø–æ–ø–∞–¥–∞–µ—Ç–µ –≤ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –≤–æ—Å—Å–æ–∑–¥–∞–≤–∞—è –∏ –ø—ã—Ç–∞—è—Å—å —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–≤–∏—á–Ω—É—é —Ç—Ä–∞–≤–º—É.',
      characteristics: [
        '–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏',
        '–ò—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ç–∏–ø—É –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤',
        '–ß—É–≤—Å—Ç–≤–æ "–∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏—è" –≤ —Ü–∏–∫–ª–µ —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π',
        '–û—â—É—â–µ–Ω–∏–µ –ø—Ä–µ–¥–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–∏–∑–±–µ–∂–Ω–æ—Å—Ç–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö'
      ],
      healingPath: [
        '–û—Å–æ–∑–Ω–∞–Ω–∏–µ –∏ –ø—Ä–∏–∑–Ω–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π',
        '–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–∏—á–Ω–æ–π —Ç—Ä–∞–≤–º—ã, –ª–µ–∂–∞—â–µ–π –≤ –æ—Å–Ω–æ–≤–µ',
        '–ü—Ä–∏–Ω—è—Ç–∏–µ –ø–æ–ª–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Å–≤–æ—é —á–∞—Å—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞',
        '–°–æ–∑–Ω–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è'
      ],
      therapyRecommendations: [
        '–ü–†–ò–û–†–ò–¢–ï–¢: –°—Ö–µ–º–∞-—Ç–µ—Ä–∞–ø–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∂–∏–∑–Ω–µ–Ω–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏',
        '–°–µ–º–µ–π–Ω–∞—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –≤–ª–∏—è–Ω–∏–π',
        '–ü—Å–∏—Ö–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–∞–ø–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º',
        '–ü—Ä–∞–∫—Ç–∏–∫–∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ–∞–∫—Ü–∏–π'
      ],
      warningSignals: [
        '–ß—É–≤—Å—Ç–≤–æ "—É–∂–µ –∑–Ω–∞–∫–æ–º–æ–≥–æ" –≤ —Ç–æ–∫—Å–∏—á–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö',
        '–°–∏–ª—å–Ω–æ–µ –Ω–µ–æ–±—ä—è—Å–Ω–∏–º–æ–µ –ø—Ä–∏—Ç—è–∂–µ–Ω–∏–µ –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —Ç–∏–ø—É –ª—é–¥–µ–π',
        '–°–∞–±–æ—Ç–∞–∂ –∑–¥–æ—Ä–æ–≤—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏–∑-–∑–∞ —Å–∫—É–∫–∏ –∏–ª–∏ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞',
        '–£–±–µ–∂–¥–µ–Ω–∏–µ, —á—Ç–æ "–≤–æ—Ç —ç—Ç–æ—Ç —á–µ–ª–æ–≤–µ–∫ —Ç–æ—á–Ω–æ –±—É–¥–µ—Ç –¥—Ä—É–≥–∏–º"'
      ]
    };
  }

  // –≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç—Ä–∞—Ö –≤—ã–∂–∏–≤–∞–Ω–∏—è
  if (hasSurvivalFear && personalMaturity < 5) {
    return {
      type: 'survival_fear',
      severity: 'critical',
      title: '‚ö†Ô∏è –≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç—Ä–∞—Ö –≤—ã–∂–∏–≤–∞–Ω–∏—è',
      description: '–ì–ª—É–±–∏–Ω–Ω—ã–π —Å—Ç—Ä–∞—Ö –∑–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –∏–ª–∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –≤—ã–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –≤ –±–ª–∏–∑–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –∑–∞–ø—É—Å–∫–∞—è –ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ –∑–∞—â–∏—Ç–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏.',
      characteristics: [
        '–ò—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç—Ä–∞—Ö —É–≥—Ä–æ–∑—ã –∂–∏–∑–Ω–∏ –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö',
        '–ü–∞–Ω–∏–∫–∞ –∏–ª–∏ –¥–∏—Å—Å–æ—Ü–∏–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–≤–µ—Ä–∂–µ–Ω–∏–∏',
        '–ì–∏–ø–µ—Ä—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ —Ç—Ä–∏–≥–≥–µ—Ä—ã –±—Ä–æ—à–µ–Ω–Ω–æ—Å—Ç–∏',
        '–ö—Ä–∞–π–Ω—è—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ –¥–ª—è —á—É–≤—Å—Ç–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏'
      ],
      healingPath: [
        '–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ —á—É–≤—Å—Ç–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ —Ç–µ–ª–µ',
        '–†–∞–∑–≤–∏—Ç–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è –¥–ª—è –æ—Ç–¥–µ–ª–µ–Ω–∏—è –ø—Ä–æ—à–ª–æ–≥–æ –æ—Ç –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ',
        '–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è –∫ –º–∞–ª—ã–º –¥–æ–∑–∞–º –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç–∞',
        '–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–¥–æ—Ä–æ–≤–æ–π –∞–≤—Ç–æ–Ω–æ–º–∏–∏ –±–µ–∑ –∏–∑–æ–ª—è—Ü–∏–∏'
      ],
      therapyRecommendations: [
        '–ü–†–ò–û–†–ò–¢–ï–¢: –°–æ–º–∞—Ç–∏—á–µ—Å–∫–∏-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è',
        '–†–µ–≥—É–ª—è—Ü–∏—è –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —á–µ—Ä–µ–∑ —Ç–µ–ª–µ—Å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏',
        '–†–∞–±–æ—Ç–∞ —Å –ø–∞—Ä–∞—Å–∏–º–ø–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π',
        '–°–æ–∑–¥–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–ª—å—è–Ω—Å–∞'
      ],
      warningSignals: [
        '–§–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–∏–º–ø—Ç–æ–º—ã (—Å–ø–∞–∑–º—ã, –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ) –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö –±–ª–∏–∑–æ—Å—Ç–∏',
        '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–∫—Ü–∏—è "–±–µ–π, –±–µ–≥–∏, –∑–∞–º—Ä–∏" –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö',
        '–ù–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è –≤ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–∞—Ä—Ç–Ω–µ—Ä–∞',
        '–û—â—É—â–µ–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –≥–∏–ø–µ—Ä–±–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å'
      ]
    };
  }
  
  // –ù–µ–ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –¥–µ—Ç—Å–∫–∞—è —Ç—Ä–∞–≤–º–∞ 
  if (hasChildhoodActivation && personalMaturity < 6.5) {
    return {
      type: 'unresolved_childhood',
      severity: 'significant',
      title: 'üë∂ –ù–µ–ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –¥–µ—Ç—Å–∫–∞—è —Ç—Ä–∞–≤–º–∞',
      description: '–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –¥–µ—Ç—Å–∫–∏–µ —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è, –≤—ã–∑—ã–≤–∞—è –Ω–µ–∞–¥–µ–∫–≤–∞—Ç–Ω—ã–µ –≤–æ–∑—Ä–∞—Å—Ç—É —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏.',
      characteristics: [
        '–î–∏—Å–ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã',
        '–í–Ω–µ–∑–∞–ø–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è –∫ –¥–µ—Ç—Å–∫–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö',
        '–ü–µ—Ä–µ–Ω–æ—Å –¥–µ—Ç—Å–∫–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–π –Ω–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞',
        '–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–¥–µ–ª–∏—Ç—å –ø—Ä–æ—à–ª—ã–π –æ–ø—ã—Ç –æ—Ç –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ'
      ],
      healingPath: [
        '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ä–≥–Ω—É—Ç—ã—Ö —á–∞—Å—Ç–µ–π —Å–≤–æ–µ–≥–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ä–µ–±–µ–Ω–∫–∞',
        '–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ—à–ª–æ–≥–æ –∏ –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ',
        '–†–∞–∑–≤–∏—Ç–∏–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∞–º–æ—É—Å–ø–æ–∫–æ–µ–Ω–∏—è –∏ —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏–∏',
        '–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø—ã—Ç–æ–≤ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö'
      ],
      therapyRecommendations: [
        '–ü–†–ò–û–†–ò–¢–ï–¢: –ü—Å–∏—Ö–æ–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–∞–ø–∏—è',
        '–†–∞–±–æ—Ç–∞ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º —Ä–µ–±–µ–Ω–∫–æ–º –∏ —á–∞—Å—Ç—è–º–∏ –ª–∏—á–Ω–æ—Å—Ç–∏',
        '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Ä—É—à–µ–Ω–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü',
        '–ö–æ—Ä—Ä–µ–∫—Ç–∏–≤–Ω—ã–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç –≤ —Ç–µ—Ä–∞–ø–∏–∏'
      ],
      warningSignals: [
        '–í–Ω–µ–∑–∞–ø–Ω–∞—è —Å–º–µ–Ω–∞ —Ç–æ–Ω–∞ –≥–æ–ª–æ—Å–∞ –∏ —è–∑—ã–∫–∞ —Ç–µ–ª–∞ –ø—Ä–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö',
        '–ß—É–≤—Å—Ç–≤–æ –ø–æ–ª–Ω–æ–π –±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç–∏ –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö',
        '–ù–µ–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–µ –≤–æ—Å—Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ—Ç—Å–∫–∏—Ö —Ä–æ–ª–µ–π –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö',
        '–ò—Ä—Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å—Ç—Ä–∞—Ö, –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–∏—Ç—É–∞—Ü–∏–∏'
      ]
    };
  }
  
  // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–≤–º–æ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏)
  if (personalMaturity >= 7.5 || traumaIndicatorsCount <= 1) {
    return {
      type: 'adaptive_management',
      severity: 'minimal',
      title: 'üå± –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–≤–º–æ–π',
      description: '–í—ã –æ—Å–æ–∑–Ω–∞—ë—Ç–µ —Å–≤–æ–∏ —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏ –∏ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –Ω–∏–º–∏, –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—è —Å–ª–æ–∂–Ω—ã–π –æ–ø—ã—Ç –≤ –ª–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç.',
      characteristics: [
        '–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Å–≤–æ–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤',
        '–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤–∑—Ä–æ—Å–ª—ã–º –¥–∞–∂–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö —Ä–∞–Ω',
        '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö —ç–º–æ—Ü–∏–π –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏',
        '–£—Å—Ç–æ–π—á–∏–≤–∞—è —Å–∞–º–æ–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –º–æ–º–µ–Ω—Ç—ã —É—è–∑–≤–∏–º–æ—Å—Ç–∏'
      ],
      healingPath: [
        '–£–≥–ª—É–±–ª–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è',
        '–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–µ–Ω–µ–≤—ã—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –ª–∏—á–Ω–æ—Å—Ç–∏',
        '–†–∞–∑–≤–∏—Ç–∏–µ –µ—â–µ –±–æ–ª—å—à–µ–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –≥–∏–±–∫–æ—Å—Ç–∏',
        '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø—ã—Ç–∞ –¥–ª—è –ø–æ–º–æ—â–∏ –¥—Ä—É–≥–∏–º'
      ],
      therapyRecommendations: [
        '–≠–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å–º—ã—Å–ª–æ–≤',
        '–†–∞–∑–≤–∏—Ç–∏–µ —Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏—è –∫ —Å–µ–±–µ –∏ –¥—Ä—É–≥–∏–º',
        '–¢—Ä–∞–Ω—Å–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Å–æ–∑–Ω–∞–Ω–∏—è',
        '–°–æ—á–µ—Ç–∞–Ω–∏–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã —Å –¥—É—Ö–æ–≤–Ω—ã–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏'
      ],
      warningSignals: [
        '–ß—Ä–µ–∑–º–µ—Ä–Ω–∞—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏',
        '–°–≤–µ—Ä—Ö–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ø–æ–º–æ—â—å –¥—Ä—É–≥–∏–º',
        '–ò–∑–±–µ–≥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π —É—è–∑–≤–∏–º–æ—Å—Ç–∏',
        '–ü—Ä–µ–Ω–µ–±—Ä–µ–∂–µ–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏ —Å–∞–º–æ—Ä–µ–≥—É–ª—è—Ü–∏–∏'
      ]
    };
  }
  
  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - —É–º–µ—Ä–µ–Ω–Ω–∞—è —Ç—Ä–∞–≤–º–∞
  return {
    type: 'moderate_trauma',
    severity: 'moderate',
    title: 'üîÑ –£–º–µ—Ä–µ–Ω–Ω–∞—è —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
    description: '–í—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∞–∫—Ü–∏–∏, –Ω–æ –æ–Ω–∏ –Ω–µ –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç –Ω–∞–¥ –≤–∞—à–∏–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é.',
    characteristics: [
      '–õ–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏',
      '–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø–æ—Å–ª–µ —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–∫—Ü–∏–∏',
      '–ö–æ–ª–µ–±–∞–Ω–∏—è –º–µ–∂–¥—É —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é –∏ —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ–∞–∫—Ü–∏—è–º–∏',
      '–ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤'
    ],
    healingPath: [
      '–ö–∞—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ —Ä–µ–∞–∫—Ü–∏–π',
      '–†–∞–∑–≤–∏—Ç–∏–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –≤ –º–æ–º–µ–Ω—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ç—Ä–∞–≤–º—ã',
      '–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–æ–Ω—ã —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç–∏',
      '–°–æ–∑–¥–∞–Ω–∏–µ –∑–¥–æ—Ä–æ–≤—ã—Ö —Ä–∏—Ç—É–∞–ª–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏'
    ],
    therapyRecommendations: [
      '–ö–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ-–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è —Ç–µ—Ä–∞–ø–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–±–µ–∂–¥–µ–Ω–∏—è–º–∏',
      '–ü—Ä–∞–∫—Ç–∏–∫–∏ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è',
      '–¢–µ—Ö–Ω–∏–∫–∏ —Ä–µ–≥—É–ª—è—Ü–∏–∏ –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã',
      '–ì—Ä—É–ø–ø–æ–≤–∞—è —Ç–µ—Ä–∞–ø–∏—è –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–ø—ã—Ç–∞'
    ],
    warningSignals: [
      '–ò–∑–±–µ–≥–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–µ–º –∏ —Å–∏—Ç—É–∞—Ü–∏–π –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö',
      '–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –Ω–µ–æ–±—ä—è—Å–Ω–∏–º—ã–µ —Å–º–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è',
      '–¢–µ–Ω–¥–µ–Ω—Ü–∏—è –∫ —Å–∞–º–æ–æ–±–≤–∏–Ω–µ–Ω–∏—é –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ç—Ä–∞–≤–º—ã',
      '–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø–æ –æ–¥–Ω–æ–º—É —Å—Ü–µ–Ω–∞—Ä–∏—é'
    ]
  };
};
