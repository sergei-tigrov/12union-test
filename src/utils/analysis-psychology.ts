import { JealousyDynamics, AttachmentStyle, BoundariesHealth } from '../types/analysis-types';
import { 
  hasAnyIndicator, 
  countIndicatorsOfType,
  anxiousAttachmentKeywords,
  avoidantAttachmentKeywords,
  secureAttachmentKeywords,
  traumaKeywords
} from './analysis-helpers';

/**
 * –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É —Ä–µ–≤–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
 * @param indicators - —Å–ø–∏—Å–æ–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
 * @param personalMaturity - —É—Ä–æ–≤–µ–Ω—å –ª–∏—á–Ω–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏
 * @returns –æ–±—ä–µ–∫—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º –¥–∏–Ω–∞–º–∏–∫–∏ —Ä–µ–≤–Ω–æ—Å—Ç–∏
 */
export const analyzeJealousyDynamics = (
  indicators: string[], 
  personalMaturity: number
): JealousyDynamics => {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  const hasInsecurityBased = hasAnyIndicator(indicators, ['insecurity_jealousy', 'abandonment_fear']);
  const hasControlBased = hasAnyIndicator(indicators, ['control_jealousy', 'possessiveness']);
  const hasTraumaBased = hasAnyIndicator(indicators, ['trauma_jealousy', 'betrayal_trauma']);
  
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ä–µ–≤–Ω–æ—Å—Ç–∏
  let type: 'insecurity_based' | 'control_based' | 'trauma_based' | 'minimal' | 'healthy_concern' = 'minimal';
  
  if (hasInsecurityBased) {
    type = 'insecurity_based';
  } else if (hasControlBased) {
    type = 'control_based';
  } else if (hasTraumaBased) {
    type = 'trauma_based';
  } else if (personalMaturity >= 6.5) {
    type = 'healthy_concern';
  }
  
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ —Ä–µ–≤–Ω–æ—Å—Ç–∏
  const triggers: string[] = [];
  
  if (hasInsecurityBased) {
    triggers.push('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –≤–Ω–∏–º–∞–Ω–∏—è –∏–ª–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–ª–∏–∑–æ—Å—Ç–∏');
    triggers.push('–°–∏—Ç—É–∞—Ü–∏–∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è');
  }
  
  if (hasControlBased) {
    triggers.push('–û—â—É—â–µ–Ω–∏–µ –ø–æ—Ç–µ—Ä–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º');
    triggers.push('–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞');
  }
  
  if (hasTraumaBased) {
    triggers.push('–°–∏—Ç—É–∞—Ü–∏–∏, –Ω–∞–ø–æ–º–∏–Ω–∞—é—â–∏–µ –ø—Ä–æ—à–ª—ã–µ —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—ã—Ç—ã');
    triggers.push('–°–∏–≥–Ω–∞–ª—ã –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –Ω–µ–≤–µ—Ä–Ω–æ—Å—Ç–∏');
  }
  
  // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∑–¥–æ—Ä–æ–≤—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º
  const healthyPractices = [
    '–†–∞–∑–≤–∏—Ç–∏–µ —Å–∞–º–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ª–∏—á–Ω–æ–π –∞–≤—Ç–æ–Ω–æ–º–∏–∏',
    '–ü—Ä–∞–∫—Ç–∏–∫–∞ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Ä–µ–≤–Ω–∏–≤—ã—Ö –º—ã—Å–ª–µ–π',
    '–†–∞–±–æ—Ç–∞ —Å –∫–æ—Ä–Ω–µ–≤—ã–º–∏ —É–±–µ–∂–¥–µ–Ω–∏—è–º–∏ –æ —Å–µ–±–µ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö'
  ];
  
  // –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
  const communicationStrategies = [
    '–Ø-–≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è –≤–º–µ—Å—Ç–æ –æ–±–≤–∏–Ω–µ–Ω–∏–π',
    '–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —á–µ–∫-–∏–Ω—ã –æ–± —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏',
    '–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü'
  ];
  
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–∞
  let title = '';
  let description = '';
  const characteristics: string[] = [];
  let severity: 'minimal' | 'moderate' | 'significant' | 'critical' = 'minimal';
  
  if (type === 'insecurity_based') {
    title = '–†–µ–≤–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏';
    description = '–í–∞—à–∞ —Ä–µ–≤–Ω–æ—Å—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–æ–∏—Å—Ç–µ–∫–∞–µ—Ç –∏–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ç—Ä–∞—Ö–∞ –ø–æ—Ç–µ—Ä–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏–π';
    characteristics.push('–ß–∞—Å—Ç–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ —á—É–≤—Å—Ç–≤');
    characteristics.push('–¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞');
    severity = 'significant';
  } else if (type === 'control_based') {
    title = '–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—é—â–∞—è —Ä–µ–≤–Ω–æ—Å—Ç—å';
    description = '–í–∞—à–∞ —Ä–µ–≤–Ω–æ—Å—Ç—å –≤—ã—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø–æ–ø—ã—Ç–∫–∞—Ö –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞';
    characteristics.push('–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ—Ç—á—ë—Ç–æ–≤ –æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö');
    characteristics.push('–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–±—â–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞ —Å –¥—Ä—É–≥–∏–º–∏');
    severity = 'critical';
  } else if (type === 'trauma_based') {
    title = '–†–µ–≤–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç—Ä–∞–≤–º—ã';
    description = '–í–∞—à–∞ —Ä–µ–≤–Ω–æ—Å—Ç—å —Å–≤—è–∑–∞–Ω–∞ —Å –ø—Ä–æ—à–ª—ã–º–∏ —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è–º–∏';
    characteristics.push('–°–∏–ª—å–Ω—ã–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Ç—Ä–∏–≥–≥–µ—Ä—ã');
    characteristics.push('–§–ª–µ—à–±—ç–∫–∏ –ø—Ä–æ—à–ª—ã—Ö —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Ç—É–∞—Ü–∏–π');
    severity = 'significant';
  } else if (type === 'healthy_concern') {
    title = '–ó–¥–æ—Ä–æ–≤–∞—è –∑–∞–±–æ—Ç–∞';
    description = '–í–∞—à–µ —á—É–≤—Å—Ç–≤–æ —Ä–µ–≤–Ω–æ—Å—Ç–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–¥–æ—Ä–æ–≤–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –∏ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∑–∞–±–æ—Ç—ã –æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö';
    characteristics.push('–û—Ç–∫—Ä—ã—Ç–æ–µ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ —á—É–≤—Å—Ç–≤');
    characteristics.push('–ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∑–∞–±–æ—Ç–æ–π –∏ –¥–æ–≤–µ—Ä–∏–µ–º');
    severity = 'minimal';
  } else {
    title = '–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–≤–Ω–æ—Å—Ç—å';
    description = '–í –≤–∞—à–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è —Ä–µ–≤–Ω–æ—Å—Ç–∏';
    characteristics.push('–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è');
    characteristics.push('–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –±–ª–∏–∑–æ—Å—Ç–∏');
    severity = 'minimal';
  }
  
  return {
    type,
    triggers,
    healthyPractices,
    communicationStrategies,
    title,
    description,
    characteristics,
    severity
  };
};

/**
 * –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å—Ç–∏–ª—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —É—Ä–æ–≤–Ω—è –ª–∏—á–Ω–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏
 * @param indicators - —Å–ø–∏—Å–æ–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
 * @param personalMaturity - —É—Ä–æ–≤–µ–Ω—å –ª–∏—á–Ω–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏
 * @returns –æ–±—ä–µ–∫—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º —Å—Ç–∏–ª—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
 */
export const analyzeAttachmentStyle = (
  indicators: string[], 
  personalMaturity: number
): AttachmentStyle => {
  // –ü–æ–¥—Å—á–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  const avoidanceScore = countIndicatorsOfType(indicators, avoidantAttachmentKeywords);
  const anxietyScore = countIndicatorsOfType(indicators, anxiousAttachmentKeywords);
  const traumaScore = countIndicatorsOfType(indicators, traumaKeywords);
  const securityScore = countIndicatorsOfType(indicators, secureAttachmentKeywords);
  
  // –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
  let type: 'secure' | 'mixed' | 'anxious' | 'avoidant' | 'disorganized' | 'anxious_high_functioning' | 'avoidant_intellectual' | 'earned_secure' = 'mixed';
  
  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–µ–∑–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
  if (traumaScore >= 3 && (avoidanceScore >= 2 || anxietyScore >= 2) && personalMaturity <= 4) {
    type = 'disorganized';
  }
  
  // –ù–∞–¥–µ–∂–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
  if (securityScore >= 3 && traumaScore < 2 && anxietyScore < 2 && avoidanceScore < 2) {
    type = 'secure';
  }
  
  // –¢—Ä–µ–≤–æ–∂–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
  if (anxietyScore > avoidanceScore && anxietyScore >= 3) {
    // –í—ã—Å–æ–∫–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
    if (personalMaturity >= 6) {
      type = 'anxious_high_functioning';
    } else {
      type = 'anxious';
    }
  }
  
  // –ò–∑–±–µ–≥–∞—é—â–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
  if (avoidanceScore > anxietyScore && avoidanceScore >= 3) {
    // –í—ã—Å–æ–∫–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–∑–±–µ–≥–∞—é—â–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å
    if (personalMaturity >= 6) {
      type = 'avoidant_intellectual';
    } else {
      type = 'avoidant';
    }
  }
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏
  let severity: 'minimal' | 'moderate' | 'significant' | 'critical' = 'moderate';
  switch(type) {
    case 'secure':
      severity = 'minimal';
      break;
    case 'anxious_high_functioning':
    case 'avoidant_intellectual':
    case 'mixed':
      severity = 'moderate';
      break;
    case 'anxious':
    case 'avoidant':
      severity = 'significant';
      break;
    case 'disorganized':
      severity = 'critical';
      break;
  }
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
  let title = 'üß© –°–º–µ—à–∞–Ω–Ω—ã–π —Å—Ç–∏–ª—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏';
  switch(type) {
    case 'secure':
      title = 'üíö –ù–∞–¥–µ–∂–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å';
      break;
    case 'anxious':
      title = 'üíõ –¢—Ä–µ–≤–æ–∂–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å';
      break;
    case 'anxious_high_functioning':
      title = 'üíô –í—ã—Å–æ–∫–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å';
      break;
    case 'avoidant':
      title = 'üíõ –ò–∑–±–µ–≥–∞—é—â–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å';
      break;
    case 'avoidant_intellectual':
      title = 'üíô –í—ã—Å–æ–∫–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–∑–±–µ–≥–∞—é—â–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å';
      break;
    case 'disorganized':
      title = 'üå™Ô∏è –î–µ–∑–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å';
      break;
  }
  
  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
  let description = '–£ –≤–∞—Å –ø—Ä–æ—è–≤–ª—è—é—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç—ã —Ä–∞–∑–Ω—ã—Ö —Å—Ç–∏–ª–µ–π –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π.';
  
  switch(type) {
    case 'secure':
      description = '–í—ã —Å–ø–æ—Å–æ–±–Ω—ã —Å—Ç—Ä–æ–∏—Ç—å –∑–¥–æ—Ä–æ–≤—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –±–ª–∏–∑–æ—Å—Ç—å—é –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é. –í—ã –¥–æ–≤–µ—Ä—è–µ—Ç–µ –ø–∞—Ä—Ç–Ω–µ—Ä—É –∏ –ª–µ–≥–∫–æ –≤—ã—Ä–∞–∂–∞–µ—Ç–µ —Å–≤–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏.';
      break;
    case 'anxious':
      description = '–í–∞–º —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω–æ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ –æ —Ç–æ–º, —á—Ç–æ –≤–∞—Å –º–æ–≥—É—Ç –ø–æ–∫–∏–Ω—É—Ç—å –∏–ª–∏ –æ—Ç–≤–µ—Ä–≥–Ω—É—Ç—å. –í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –±–ª–∏–∑–æ—Å—Ç–∏ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.';
      break;
    case 'anxious_high_functioning':
      description = '–£ –≤–∞—Å –µ—Å—Ç—å —Ç–µ–Ω–¥–µ–Ω—Ü–∏—è –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –æ–± –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –Ω–æ –≤—ã —Ä–∞–∑–≤–∏–ª–∏ –Ω–∞–≤—ã–∫–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–µ —É—Å–ø–µ—à–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ç—Ä–µ–≤–æ–≥–æ–π –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—ã–µ —Å–≤—è–∑–∏.';
      break;
    case 'avoidant':
      description = '–í—ã —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏, —á–∞—Å—Ç–æ –∏–∑–±–µ–≥–∞—è —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏ –≥–ª—É–±–æ–∫–æ–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–ª–∏–∑–æ—Å—Ç–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.';
      break;
    case 'avoidant_intellectual':
      description = '–í—ã —Ü–µ–Ω–∏—Ç–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –Ω–æ —Ä–∞–∑–≤–∏–ª–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ—Å–æ–∑–Ω–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Ç–µ–Ω–¥–µ–Ω—Ü–∏–∏ –∫ –∏–∑–±–µ–≥–∞–Ω–∏—é –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö. –í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ—Å–æ–∑–Ω–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏.';
      break;
    case 'disorganized':
      description = '–í—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö: —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ –±–ª–∏–∑–æ—Å—Ç–∏ –∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å—Ç—Ä–∞—Ö –ø–µ—Ä–µ–¥ –Ω–µ–π. –ó–∞—Ç—Ä—É–¥–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è.';
      break;
  }
  const characteristics: string[] = [];
  const workingWith: string[] = [];
  const healthyDevelopment: string[] = [];
  const relationshipAdvice: string[] = [];
  
  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
  switch(type) {
    case 'secure':
      characteristics.push('–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö');
      characteristics.push('–ó–¥–æ—Ä–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã –∏ –∞–≤—Ç–æ–Ω–æ–º–∏—è');
      characteristics.push('–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫ –¥–æ–≤–µ—Ä–∏—é');
      
      workingWith.push('–ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —É–∂–µ —Ä–∞–∑–≤–∏—Ç—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –∏ –∏—Ö —É—Å–∏–ª–µ–Ω–∏–µ');
      healthyDevelopment.push('–î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –≥–∏–±–∫–æ—Å—Ç–∏');
      relationshipAdvice.push('–î–µ–ª–∏—Ç–µ—Å—å —Å–≤–æ–∏–º–∏ –Ω–∞–≤—ã–∫–∞–º–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º');
      break;
      
    case 'anxious':
      characteristics.push('–°—Ç—Ä–∞—Ö –±—ã—Ç—å –ø–æ–∫–∏–Ω—É—Ç—ã–º');
      characteristics.push('–ü–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏');
      characteristics.push('–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –æ—Ç–≤–µ—Ä–∂–µ–Ω–∏—é');
      
      workingWith.push('–†–∞–∑–≤–∏—Ç–∏–µ —Å–∞–º–æ—É—Å–ø–æ–∫–æ–µ–Ω–∏—è');
      healthyDevelopment.push('–£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–∞–º–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏');
      relationshipAdvice.push('–û–±—Å—É–¥–∏—Ç–µ —Å–≤–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º');
      break;
      
    case 'anxious_high_functioning':
      characteristics.push('–û—Å–æ–∑–Ω–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–≤–æ–≥–æ–π');
      characteristics.push('–£–º–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–≤–æ–∂–Ω—ã–µ –º—ã—Å–ª–∏');
      
      workingWith.push('–î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ —Ä–µ–≥—É–ª—è—Ü–∏–∏');
      healthyDevelopment.push('–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –∫–æ–ø–∏–Ω–≥–∞');
      relationshipAdvice.push('–û—Ç–∫—Ä—ã—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç–µ –æ —Å–≤–æ–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º');
      break;
      
    case 'avoidant':
      characteristics.push('–ù–µ–¥–æ–≤–µ—Ä–∏–µ –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º');
      characteristics.push('–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏');
      characteristics.push('–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∑–∞–∫—Ä—ã—Ç–æ—Å—Ç—å');
      
      workingWith.push('–†–∞–∑–≤–∏—Ç–∏–µ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —É—è–∑–≤–∏–º–æ—Å—Ç–∏');
      healthyDevelopment.push('–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ –æ–±—â–µ–Ω–∏–∏');
      relationshipAdvice.push('–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —à–∞–≥–∏ –∫ —É—è–∑–≤–∏–º–æ—Å—Ç–∏');
      break;
      
    case 'avoidant_intellectual':
      characteristics.push('–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥—Ö–æ–¥ –∫ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º');
      characteristics.push('–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å —Å–≤–æ–∏—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤');
      
      workingWith.push('–ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∞–Ω–∞–ª–∏–∑–æ–º –∏ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏–µ–º');
      healthyDevelopment.push('–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á—É–≤—Å—Ç–≤ –∏ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è');
      relationshipAdvice.push('–ü–æ–∑–≤–æ–ª—è–π—Ç–µ —Å–µ–±–µ –±–æ–ª—å—à–µ —Å–ø–æ–Ω—Ç–∞–Ω–Ω–æ—Å—Ç–∏');
      break;
      
    case 'disorganized':
      characteristics.push('–ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã–µ —Ä–µ–∞–∫—Ü–∏–∏');
      characteristics.push('–¢—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å —Ä–µ–≥—É–ª—è—Ü–∏–µ–π —ç–º–æ—Ü–∏–π');
      characteristics.push('–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏—è');
      
      workingWith.push('–†–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–≤–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—ã—Ç–æ–º');
      healthyDevelopment.push('–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞');
      relationshipAdvice.push('–ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É');
      break;
      
    case 'mixed':
      characteristics.push('–†–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö –∏–ª–∏ —Å–∏—Ç—É–∞—Ü–∏—è—Ö');
      workingWith.push('–†–∞–∑–≤–∏—Ç–∏–µ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –æ —Å–≤–æ–∏—Ö —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏—è—Ö');
      healthyDevelopment.push('–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, –∞–∫—Ç–∏–≤–∏—Ä—É—é—â–∏—Ö —Ä–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏');
      relationshipAdvice.push('–û–±—Å—É–∂–¥–∞–π—Ç–µ —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º —Å–≤–æ–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏');
      break;
  }
  
  return {
    type,
    severity,
    title,
    description,
    characteristics,
    workingWith,
    healthyDevelopment,
    relationshipAdvice
  };
};

/**
 * –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–¥–æ—Ä–æ–≤—å–µ –≥—Ä–∞–Ω–∏—Ü –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ —É—Ä–æ–≤–Ω—è –ª–∏—á–Ω–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏
 * @param indicators - —Å–ø–∏—Å–æ–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
 * @param personalMaturity - —É—Ä–æ–≤–µ–Ω—å –ª–∏—á–Ω–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏
 * @returns –æ–±—ä–µ–∫—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º –∑–¥–æ—Ä–æ–≤—å—è –≥—Ä–∞–Ω–∏—Ü
 */
export const analyzeBoundariesHealth = (
  indicators: string[], 
  personalMaturity: number
): BoundariesHealth => {
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  const hasWeakBoundaries = hasAnyIndicator(indicators, ['weak_boundaries', 'poor_limits', 'overgiving']);
  const hasRigidBoundaries = hasAnyIndicator(indicators, ['rigid_boundaries', 'excessive_protection', 'isolation']);
  const hasFluctuatingBoundaries = hasAnyIndicator(indicators, ['fluctuating_boundaries', 'inconsistent_limits']);
  
  // –°–ª–∞–±—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã
  if (hasWeakBoundaries && personalMaturity < 6) {
    return {
      type: 'weak',
      severity: 'critical',
      title: 'üîì –°–ª–∞–±—ã–µ –∏–ª–∏ —Ä–∞–∑–º—ã—Ç—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã',
      description: '–í—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ–º –ª–∏—á–Ω—ã—Ö –≥—Ä–∞–Ω–∏—Ü, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –≤–∞—Å —É—è–∑–≤–∏–º—ã–º–∏ –¥–ª—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å—Ç–æ—â–µ–Ω–∏—è.',
      characteristics: [
        '–°–ª–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å "–Ω–µ—Ç" –∏ –æ—Ç—Å—Ç–∞–∏–≤–∞—Ç—å —Å–≤–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏',
        '–ß—Ä–µ–∑–º–µ—Ä–Ω–∞—è –∑–∞–±–æ—Ç–∞ –æ –¥—Ä—É–≥–∏—Ö –≤ —É—â–µ—Ä–± —Å–µ–±–µ',
        '–ß–∞—Å—Ç–æ–µ —á—É–≤—Å—Ç–≤–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å—Ç–æ—â–µ–Ω–∏—è',
        '–ü—Ä–∏–Ω—è—Ç–∏–µ –Ω–∞ —Å–µ–±—è –ø—Ä–æ–±–ª–µ–º –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π'
      ],
      practicalExercises: [
        '–ù–∞—á–Ω–∏—Ç–µ —Å –º–∞–ª–æ–≥–æ: –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –≥–æ–≤–æ—Ä–∏—Ç—å "–Ω–µ—Ç" –≤ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö',
        '–í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ –≥—Ä–∞–Ω–∏—Ü: –æ—Ç–º–µ—á–∞–π—Ç–µ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –≤–∞—à–∏ –≥—Ä–∞–Ω–∏—Ü—ã –Ω–∞—Ä—É—à–∞—é—Ç—Å—è',
        '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ—Ö–Ω–∏–∫–∏ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ —á—É–≤—Å—Ç–≤–∞ –≤–∏–Ω—ã',
        '–°–æ–∑–¥–∞–π—Ç–µ —Å–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –±–∞–∑–æ–≤—ã—Ö –ø—Ä–∞–≤ –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π'
      ],
      boundaryStatements: [
        '–Ø –∏–º–µ—é –ø—Ä–∞–≤–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ —Ä–∞—Å—Å—Ç—Ä–æ–∏—Ç –¥—Ä—É–≥–∏—Ö',
        '–ú–æ–∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –∏ —á—É–≤—Å—Ç–≤–∞ —Ç–∞–∫ –∂–µ –≤–∞–∂–Ω—ã, –∫–∞–∫ –∏ —á—É–≤—Å—Ç–≤–∞ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π',
        '–Ø –Ω–µ –æ—Ç–≤–µ—á–∞—é –∑–∞ —Å—á–∞—Å—Ç—å–µ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π',
        '–Ø –∑–∞—Å–ª—É–∂–∏–≤–∞—é —É–≤–∞–∂–µ–Ω–∏—è –∏ –∑–∞–±–æ—Ç—ã –æ —Å–≤–æ–∏—Ö –≥—Ä–∞–Ω–∏—Ü–∞—Ö'
      ]
    };
  }
  
  // –†–∏–≥–∏–¥–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã
  if (hasRigidBoundaries && personalMaturity < 7) {
    return {
      type: 'rigid',
      severity: 'significant',
      title: 'üîí –ñ–µ—Å—Ç–∫–∏–µ –∏–ª–∏ —Ä–∏–≥–∏–¥–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã',
      description: '–í—ã –≤–æ–∑–≤–æ–¥–∏—Ç–µ –≤—ã—Å–æ–∫–∏–µ —Å—Ç–µ–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—â–∏—â–∞—é—Ç –æ—Ç –±–æ–ª–∏, –Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±–ª–æ–∫–∏—Ä—É—é—Ç –Ω–∞—Å—Ç–æ—è—â—É—é –±–ª–∏–∑–æ—Å—Ç—å –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–≤—è–∑—å.',
      characteristics: [
        '–°–ª–æ–∂–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏ –¥–æ–≤–µ—Ä–∏—è',
        '–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–∞–∂–µ –∫–æ–≥–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞',
        '–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–ª—è –±–ª–∏–∑–∫–∏—Ö',
        '–ò–∑–±–µ–≥–∞–Ω–∏–µ —Å–∏—Ç—É–∞—Ü–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö –≥–ª—É–±–æ–∫–æ–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–≤—è–∑–∏'
      ],
      practicalExercises: [
        '–ü—Ä–∞–∫—Ç–∏–∫–∞ –º–∏–∫—Ä–æ-—É—è–∑–≤–∏–º–æ—Å—Ç–∏: –¥–µ–ª–∏—Ç–µ—Å—å –º–∞–ª—ã–º–∏ –ª–∏—á–Ω—ã–º–∏ –¥–µ—Ç–∞–ª—è–º–∏ —Å –±–ª–∏–∑–∫–∏–º–∏',
        '–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ "–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ": –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∑–æ–Ω—ã, –≥–¥–µ –º–æ–∂–Ω–æ –ø—Ä–∏–æ—Ç–∫—Ä—ã—Ç—å—Å—è',
        '–†–∞–±–æ—Ç–∞ —Å —Ç–µ–ª–æ–º: –∑–∞–º–µ—á–∞–π—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–ª–∏–∂–µ–Ω–∏–∏',
        '–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–æ–Ω—ã –∫–æ–º—Ñ–æ—Ä—Ç–∞ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö'
      ],
      boundaryStatements: [
        '–Ø –º–æ–≥—É –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≤–ø—É—Å–∫–∞—é –¥—Ä—É–≥–∏—Ö –≤ —Å–≤–æ–π –º–∏—Ä',
        '–£—è–∑–≤–∏–º–æ—Å—Ç—å ‚Äî —ç—Ç–æ —Å–∏–ª–∞, –∞ –Ω–µ —Å–ª–∞–±–æ—Å—Ç—å',
        '–Ø –º–æ–≥—É —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã, –Ω–µ –≤–æ–∑–≤–æ–¥—è –Ω–µ–ø—Ä–æ–Ω–∏—Ü–∞–µ–º—ã—Ö —Å—Ç–µ–Ω',
        '–Ø –º–æ–≥—É –ø–æ—ç—Ç–∞–ø–Ω–æ —É—á–∏—Ç—å—Å—è –¥–æ–≤–µ—Ä–∏—é, –Ω–µ –ø–æ–¥–≤–µ—Ä–≥–∞—è —Å–µ–±—è –æ–ø–∞—Å–Ω–æ—Å—Ç–∏'
      ]
    };
  }
  
  // –ö–æ–ª–µ–±–ª—é—â–∏–µ—Å—è –≥—Ä–∞–Ω–∏—Ü—ã
  if (hasFluctuatingBoundaries) {
    return {
      type: 'fluctuating',
      severity: 'moderate',
      title: 'üîÑ –ö–æ–ª–µ–±–ª—é—â–∏–µ—Å—è –≥—Ä–∞–Ω–∏—Ü—ã',
      description: '–í–∞—à–∏ –≥—Ä–∞–Ω–∏—Ü—ã –Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã –∏ –º–µ–Ω—è—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Å–æ–∑–¥–∞–≤–∞—è –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.',
      characteristics: [
        '–ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ —á—Ä–µ–∑–º–µ—Ä–Ω–æ–π –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏ –∏ –∑–∞–∫—Ä—ã—Ç–æ—Å—Ç–∏',
        '–†–∞–∑–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –≥—Ä–∞–Ω–∏—Ü –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π –±–µ–∑ —á–µ—Ç–∫–∏—Ö –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤',
        '–í–Ω–µ–∑–∞–ø–Ω–∞—è —Å–º–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö',
        '–°–ª–æ–∂–Ω–æ—Å—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –±–ª–∏–∑–æ—Å—Ç–∏'
      ],
      practicalExercises: [
        '–î–Ω–µ–≤–Ω–∏–∫ –≥—Ä–∞–Ω–∏—Ü: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –º–µ–Ω—è—é—Ç—Å—è –≤–∞—à–∏ –≥—Ä–∞–Ω–∏—Ü—ã',
        '–ü—Ä–∞–∫—Ç–∏–∫–∞ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è –≤ –º–æ–º–µ–Ω—Ç—ã –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ –≥—Ä–∞–Ω–∏—Ü–∞—Ö',
        '–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–∏—á–Ω–æ–π "–∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–∏ –≥—Ä–∞–Ω–∏—Ü" —Å –±–∞–∑–æ–≤—ã–º–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º–∏',
        '–¢–µ—Ö–Ω–∏–∫–∞ "–û—Å—Ç–∞–Ω–æ–≤–∏—Å—å –∏ –ø—Ä–æ–≤–µ—Ä—å": –ø–∞—É–∑–∞ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –≥—Ä–∞–Ω–∏—Ü'
      ],
      boundaryStatements: [
        '–Ø –º–æ–≥—É –±—ã—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –≤ —Å–≤–æ–∏—Ö –≥—Ä–∞–Ω–∏—Ü–∞—Ö',
        '–ú–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ –º–æ–∏—Ö —Ü–µ–Ω–Ω–æ—Å—Ç—è—Ö, –∞ –Ω–µ –Ω–∞ —Å–∏—é–º–∏–Ω—É—Ç–Ω—ã—Ö —ç–º–æ—Ü–∏—è—Ö',
        '–Ø –∏–º–µ—é –ø—Ä–∞–≤–æ –Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å, –Ω–æ —Å –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å—é –ø—Ä–∏—á–∏–Ω',
        '–°—Ç–∞–±–∏–ª—å–Ω—ã–µ –∏ —è—Å–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è –º–µ–Ω—è –∏ –¥—Ä—É–≥–∏—Ö'
      ]
    };
  }
  
  // –†–∞–∑–≤–∏—Ç—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –∑—Ä–µ–ª–æ—Å—Ç–∏)
  if (personalMaturity >= 7 || (!hasWeakBoundaries && !hasRigidBoundaries && !hasFluctuatingBoundaries)) {
    return {
      type: 'healthy',
      severity: 'minimal',
      title: 'üõ°Ô∏è –ó–¥–æ—Ä–æ–≤—ã–µ –∏ –≥–∏–±–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã',
      description: '–í—ã —Å–ø–æ—Å–æ–±–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –±–ª–∏–∑–æ—Å—Ç—å—é –∏ –∞–≤—Ç–æ–Ω–æ–º–∏–µ–π, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è —è—Å–Ω—ã–µ –∏ –≥–∏–±–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∏—Ç—É–∞—Ü–∏–∏.',
      characteristics: [
        '–Ø—Å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π',
        '–£–≤–∞–∂–µ–Ω–∏–µ –∫ –≥—Ä–∞–Ω–∏—Ü–∞–º –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π',
        '–°–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏ —É—è–∑–≤–∏–º—ã–º, —Å–æ—Ö—Ä–∞–Ω—è—è —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏',
        '–ì–∏–±–∫–æ–µ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–∏–∑–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞'
      ],
      practicalExercises: [
        '–†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ —Å–∞–º–æ–æ—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –≥—Ä–∞–Ω–∏—Ü',
        '–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ —É—Å–∏–ª–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –∞—Å—Å–µ—Ä—Ç–∏–≤–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏',
        '–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –º–µ–∂–¥—É –¥–∞–≤–∞—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å',
        '–†–∞–∑–≤–∏—Ç–∏–µ –Ω–∞–≤—ã–∫–æ–≤ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–µ–≥—É–ª—è—Ü–∏–∏ –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ –≥—Ä–∞–Ω–∏—Ü'
      ],
      boundaryStatements: [
        '–Ø —É–º–µ—é –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –º–µ–∂–¥—É –±–ª–∏–∑–æ—Å—Ç—å—é –∏ –∞–≤—Ç–æ–Ω–æ–º–∏–µ–π',
        '–ú–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã –≥–∏–±–∫–∏–µ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ, –Ω–æ –∏–º–µ—é—Ç –ø—Ä–æ—á–Ω—É—é –æ—Å–Ω–æ–≤—É',
        '–Ø —Å–ø–æ—Å–æ–±–µ–Ω –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –∏ –±—ã—Ç—å —É—è–∑–≤–∏–º—ã–º —Å —Ç–µ–º–∏, –∫—Ç–æ –∑–∞—Å–ª—É–∂–∏–ª –¥–æ–≤–µ—Ä–∏–µ',
        '–Ø –æ—Å–æ–∑–Ω–∞—é –∏ —É–≤–∞–∂–∞—é —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã –∏ –≥—Ä–∞–Ω–∏—Ü—ã –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π'
      ]
    };
  }
  
  // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç
  return {
    type: 'developing',
    severity: 'moderate',
    title: 'üî® –†–∞–∑–≤–∏–≤–∞—é—â–∏–µ—Å—è –≥—Ä–∞–Ω–∏—Ü—ã',
    description: '–í—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∑–¥–æ—Ä–æ–≤—ã—Ö –≥—Ä–∞–Ω–∏—Ü, —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–º–∏ —É—Å–ø–µ—Ö–∞–º–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—è–º–∏ –≤ –∏—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.',
    characteristics: [
      '–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö –≥—Ä–∞–Ω–∏—Ü—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –≤ –¥—Ä—É–≥–∏—Ö –≤–æ–∑–Ω–∏–∫–∞—é—Ç —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏',
      '–†–∞—Å—Ç—É—â–µ–µ –æ—Å–æ–∑–Ω–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –∏ –ø—Ä–∞–≤',
      '–ù–∞–≤—ã–∫–∏ –æ—Ç—Å—Ç–∞–∏–≤–∞–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü —Ä–∞–∑–≤–∏–≤–∞—é—Ç—Å—è, –Ω–æ —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏',
      '–°—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ –±–∞–ª–∞–Ω—Å—É –º–µ–∂–¥—É –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç—å—é –∏ –∑–∞—â–∏—Ç–æ–π —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞'
    ],
    practicalExercises: [
      '–ù–∞—á–Ω–∏—Ç–µ —Å —É–∫—Ä–µ–ø–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü –≤ –Ω–∞–∏–±–æ–ª–µ–µ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã—Ö –¥–ª—è –≤–∞—Å –æ–±–ª–∞—Å—Ç—è—Ö',
      '–ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å–≤–æ–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π',
      '–í–µ–¥–∏—Ç–µ –¥–Ω–µ–≤–Ω–∏–∫ —É—Å–ø–µ—Ö–æ–≤ –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –≥—Ä–∞–Ω–∏—Ü',
      '–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ –∑–æ–Ω—ã, –≥–¥–µ –≤—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ –∑–¥–æ—Ä–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã'
    ],
    boundaryStatements: [
      '–Ø —É—á—É—Å—å –∏ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É—é—Å—å –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–¥–æ—Ä–æ–≤—ã—Ö –≥—Ä–∞–Ω–∏—Ü',
      '–ö–∞–∂–¥—ã–π –æ–ø—ã—Ç, –¥–∞–∂–µ –Ω–µ—É–¥–∞—á–Ω—ã–π, –ø–æ–º–æ–≥–∞–µ—Ç –º–Ω–µ –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã',
      '–Ø –∏–º–µ—é –ø—Ä–∞–≤–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–∞–Ω–∏—Ü',
      '–†–∞–∑–≤–∏—Ç–∏–µ –∑–¥–æ—Ä–æ–≤—ã—Ö –≥—Ä–∞–Ω–∏—Ü ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∞ –Ω–µ –∫–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞'
    ]
  };
};
