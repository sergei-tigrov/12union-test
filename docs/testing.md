# Процедуры тестирования

Тестирование проекта "12 Союз" осуществляется с использованием фреймворка Jest. Тесты написаны на TypeScript и покрывают ключевую логику вычисления результатов диагностики.

## Запуск тестов

Для запуска всех тестов выполните следующую команду в корневой директории проекта:

```bash
npm test
```

Эта команда запустит Jest, который автоматически найдет и выполнит все файлы с тестами (обычно `*.test.ts`).

## Структура тестов

Основной файл с тестами для логики расчета результатов - `src/utils/calculateResult.test.ts`.

Тесты организованы с использованием `describe` для группировки связанных тестовых случаев и `it` (или `test`) для отдельных тестовых сценариев.

## Основные покрываемые сценарии

Тесты для функции `calculateResult` покрывают следующие основные сценарии:

1.  **Пустой массив ответов**: Проверяется, что функция возвращает корректные значения по умолчанию.
2.  **Ответы только из Блока A (личные)**: Проверяется корректность расчета `personalLevelId` и распределения.
3.  **Ответы только из Блока B (отношения)**: Проверяется корректность расчета `relationshipLevelId` и распределения.
4.  **Ответы на масштабируемые вопросы (Блок C)**:
    *   Значение на минимальной отметке шкалы.
    *   Значение на максимальной отметке шкалы.
    *   Значение в середине шкалы.
    Проверяется корректность распределения очков между `lowEndLevelId` и `highEndLevelId`.
5.  **Смешанные ответы**: Комбинация ответов из Блоков A, B и C для проверки комплексного расчета всех полей результата.
6.  **Крайние случаи**:
    *   Только ответы из Блока C (масштабируемые): `personalLevelId` и `relationshipLevelId` должны остаться на уровне по умолчанию.
    *   Ответы только из Блока A и C: `relationshipLevelId` должен остаться по умолчанию.
    *   Ответы только из Блока B и C: `personalLevelId` должен остаться по умолчанию.
    *   Ответ с недействительным `questionId`: Функция должна проигнорировать такой ответ и не падать.
    *   Несоответствие типа ответа и типа вопроса: Функция должна проигнорировать такой ответ.

## Добавление новых тестов

При добавлении новой функциональности или изменении существующей логики в `calculateResult.ts` необходимо:

1.  Добавить новые тестовые случаи в `calculateResult.test.ts`, покрывающие изменения.
2.  Убедиться, что все тесты (старые и новые) проходят успешно после внесения изменений.

Использование тестовых данных из `questions.ts` и `levels.ts` помогает обеспечить соответствие тестов реальной структуре данных приложения.
